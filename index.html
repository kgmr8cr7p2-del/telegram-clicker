<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram Clicker</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: 24px;
            margin-bottom: 15px;
        }

        .stats {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            margin-bottom: 10px;
        }

        .stats div {
            margin: 5px 0;
            font-size: 16px;
        }

        .game-area {
            text-align: center;
            margin: 20px 0;
        }

        .click-button {
            background: linear-gradient(45deg, #FF6B6B, #FFE66D);
            border: none;
            border-radius: 50%;
            width: 150px;
            height: 150px;
            font-size: 18px;
            font-weight: bold;
            color: #333;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 10px 30px rgba(255, 107, 107, 0.4);
            display: block;
            margin: 0 auto;
            touch-action: manipulation;
            user-select: none;
        }

        .click-button:active {
            transform: scale(0.95);
        }

        .upgrades {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            margin-bottom: 10px;
        }

        .upgrades h3 {
            margin-bottom: 10px;
            text-align: center;
        }

        .upgrade-btn {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            font-size: 12px;
            transition: background 0.3s;
        }

        .upgrade-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .upgrade-btn:hover:not(:disabled) {
            background: rgba(255, 255, 255, 0.3);
        }

        .leaderboard {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            margin-bottom: 10px;
        }

        .leaderboard h3 {
            margin-bottom: 10px;
            text-align: center;
        }

        .leaderboard-item {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .cooldown {
            pointer-events: none;
            opacity: 0.7;
        }

        .tab-buttons {
            display: flex;
            margin-bottom: 10px;
            gap: 5px;
        }

        .tab-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
        }

        .tab-btn.active {
            background: rgba(255, 255, 255, 0.4);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .autoclicker-info {
            font-size: 12px;
            opacity: 0.8;
            margin-top: 5px;
        }

        .leaderboard-stats {
            text-align: center;
            margin-top: 10px;
            font-size: 12px;
            opacity: 0.8;
        }

        .loading {
            text-align: center;
            padding: 20px;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä—ã... üéÆ</div>
    </div>

    <script>
        // üîß –ù–ê–°–¢–†–û–ô–ö–ò - –ó–ê–ú–ï–ù–ò–¢–ï –ù–ê –í–ê–® URL!
        const API_URL = 'https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec';

        // –§—É–Ω–∫—Ü–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Telegram Web App
        function initTelegramApp() {
            console.log('üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App...');
            
            if (window.Telegram && Telegram.WebApp) {
                console.log('‚úÖ –í Telegram Web App');
                const tg = Telegram.WebApp;
                tg.expand();
                tg.setHeaderColor('#667eea');
                tg.setBackgroundColor('#667eea');
            }
            
            initGame();
        }

        // –û—Å–Ω–æ–≤–Ω–∞—è –∏–≥—Ä–∞
        function initGame() {
            console.log('üéÆ –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã...');
            createGameInterface();
            
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
            let gameState = {
                score: 0,
                level: 1,
                clicksPerTap: 1,
                upgrades: {
                    multiplier: 1,
                    autoclicker: 0,
                    autoclickerPower: 1
                },
                lastClickTime: 0,
                clickCooldown: 100,
                leaderboard: [],
                totalPlayers: 0
            };

            let autoclickerInterval = null;

            // –ü–æ–ª—É—á–∞–µ–º UserID –∏–∑ Telegram –∏–ª–∏ —Å–æ–∑–¥–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–π
            function getUserId() {
                if (window.Telegram && Telegram.WebApp && Telegram.WebApp.initDataUnsafe.user) {
                    return 'tg_' + Telegram.WebApp.initDataUnsafe.user.id;
                }
                let userId = localStorage.getItem('clicker_user_id');
                if (!userId) {
                    userId = 'user_' + Math.random().toString(36).substr(2, 9);
                    localStorage.setItem('clicker_user_id', userId);
                }
                return userId;
            }

            // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
            function loadGameState() {
                try {
                    const saved = localStorage.getItem('telegramClickerPro');
                    if (saved) {
                        const loaded = JSON.parse(saved);
                        gameState = { ...gameState, ...loaded };
                        console.log('‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ:', gameState);
                    }
                } catch (e) {
                    console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', e);
                }
            }

            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
            function saveGameState() {
                try {
                    localStorage.setItem('telegramClickerPro', JSON.stringify({
                        score: gameState.score,
                        level: gameState.level,
                        clicksPerTap: gameState.clicksPerTap,
                        upgrades: gameState.upgrades
                    }));
                } catch (e) {
                    console.error('‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:', e);
                }
            }

            // –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∞–±–ª–∏—Ü—ã –ª–∏–¥–µ—Ä–æ–≤
            async function loadLeaderboard() {
                try {
                    console.log('üì• –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∞–±–ª–∏—Ü—ã –ª–∏–¥–µ—Ä–æ–≤...');
                    
                    const response = await fetch(`${API_URL}?action=getLeaderboard&t=${Date.now()}`);
                    const data = await response.json();
                    
                    if (data.success) {
                        gameState.leaderboard = data.leaders;
                        gameState.totalPlayers = data.totalPlayers;
                        console.log('‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤:', data.leaders.length, '—Ä–µ–∞–ª—å–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤');
                    } else {
                        throw new Error(data.error);
                    }
                } catch (error) {
                    console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞:', error);
                    loadLocalLeaderboard();
                }
            }

            // –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø–∞—Å–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç
            function loadLocalLeaderboard() {
                const local = localStorage.getItem('localLeaderboard');
                if (local) {
                    gameState.leaderboard = JSON.parse(local);
                } else {
                    gameState.leaderboard = [
                        { name: "–ß–µ–º–ø–∏–æ–Ω", score: 1000000, date: new Date().toISOString() },
                        { name: "–í—Ç–æ—Ä–æ–π", score: 500000, date: new Date().toISOString() },
                        { name: "–¢—Ä–µ—Ç–∏–π", score: 250000, date: new Date().toISOString() }
                    ];
                }
            }

            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
            async function saveScoreToServer(score) {
                try {
                    const playerName = window.Telegram?.WebApp?.initDataUnsafe?.user?.first_name || '–ò–≥—Ä–æ–∫';
                    const userId = getUserId();
                    
                    console.log('üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:', playerName, score);
                    
                    const response = await fetch(API_URL, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/x-www-form-urlencoded',
                        },
                        body: `action=submitScore&name=${encodeURIComponent(playerName)}&score=${score}&userId=${encodeURIComponent(userId)}`
                    });
                    
                    const data = await response.json();
                    if (data.success) {
                        console.log('‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ Google Sheets!');
                        await loadLeaderboard();
                    } else {
                        throw new Error(data.error);
                    }
                } catch (error) {
                    console.error('‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:', error);
                }
            }

            // –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
            async function saveLeaderboard() {
                const playerScore = gameState.score;
                
                await saveScoreToServer(playerScore);
                
                localStorage.setItem('localLeaderboard', JSON.stringify(gameState.leaderboard));
            }

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            function updateUI() {
                const scoreElement = document.getElementById('score');
                const levelElement = document.getElementById('level');
                const clicksPerTapElement = document.getElementById('cpt');
                const autoclickerInfo = document.getElementById('autoclicker-info');
                
                if (scoreElement) scoreElement.textContent = gameState.score.toLocaleString();
                if (levelElement) levelElement.textContent = gameState.level;
                if (clicksPerTapElement) clicksPerTapElement.textContent = gameState.clicksPerTap.toLocaleString();
                
                if (autoclickerInfo) {
                    autoclickerInfo.textContent = `–ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä: +${(gameState.upgrades.autoclicker * gameState.upgrades.autoclickerPower).toLocaleString()}/—Å–µ–∫`;
                }
                
                updateUpgradeButtons();
                updateLeaderboard();
            }

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç —Å–ø–∞–º–∞
            function handleClick(event) {
                const now = Date.now();
                const timeSinceLastClick = now - gameState.lastClickTime;
                
                if (timeSinceLastClick < gameState.clickCooldown) {
                    return;
                }
                
                gameState.lastClickTime = now;
                
                const clickValue = gameState.clicksPerTap * gameState.upgrades.multiplier;
                gameState.score += clickValue;
                
                if (gameState.score >= gameState.level * 100) {
                    gameState.level++;
                    if (window.Telegram && Telegram.WebApp) {
                        Telegram.WebApp.HapticFeedback.impactOccurred('heavy');
                    }
                }
                
                saveGameState();
                saveLeaderboard();
                updateUI();
                
                const clickButton = document.getElementById('click-btn');
                if (clickButton) {
                    clickButton.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        clickButton.style.transform = 'scale(1)';
                    }, 100);
                    
                    clickButton.classList.add('cooldown');
                    setTimeout(() => {
                        clickButton.classList.remove('cooldown');
                    }, gameState.clickCooldown);
                }
            }

            // –ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä
            function startAutoclicker() {
                if (autoclickerInterval) {
                    clearInterval(autoclickerInterval);
                }
                
                if (gameState.upgrades.autoclicker > 0) {
                    autoclickerInterval = setInterval(() => {
                        const autoValue = gameState.upgrades.autoclicker * gameState.upgrades.autoclickerPower;
                        gameState.score += autoValue;
                        saveGameState();
                        updateUI();
                    }, 1000);
                }
            }

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ —É–ª—É—á—à–µ–Ω–∏–π
            function updateUpgradeButtons() {
                const upgrades = [
                    { id: 'multiplier', cost: 50, baseCost: 50 },
                    { id: 'autoclicker', cost: 100, baseCost: 100 },
                    { id: 'autoclicker-power', cost: 200, baseCost: 200 },
                    { id: 'click-power', cost: 150, baseCost: 150 }
                ];
                
                upgrades.forEach(upgrade => {
                    const btn = document.getElementById(`upgrade-${upgrade.id}`);
                    if (btn) {
                        const cost = upgrade.cost;
                        btn.disabled = gameState.score < cost;
                        btn.querySelector('.cost').textContent = cost.toLocaleString();
                    }
                });
            }

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —É–ª—É—á—à–µ–Ω–∏–π
            function setupUpgrades() {
                document.getElementById('upgrade-multiplier')?.addEventListener('click', function() {
                    const cost = 50 * Math.pow(2, gameState.upgrades.multiplier - 1);
                    
                    if (gameState.score >= cost) {
                        gameState.score -= cost;
                        gameState.upgrades.multiplier *= 2;
                        
                        if (window.Telegram && Telegram.WebApp) {
                            Telegram.WebApp.HapticFeedback.impactOccurred('medium');
                        }
                        
                        saveGameState();
                        updateUI();
                    }
                });

                document.getElementById('upgrade-autoclicker')?.addEventListener('click', function() {
                    const cost = 100 * Math.pow(2, gameState.upgrades.autoclicker);
                    
                    if (gameState.score >= cost) {
                        gameState.score -= cost;
                        gameState.upgrades.autoclicker += 1;
                        startAutoclicker();
                        
                        if (window.Telegram && Telegram.WebApp) {
                            Telegram.WebApp.HapticFeedback.impactOccurred('medium');
                        }
                        
                        saveGameState();
                        updateUI();
                    }
                });

                document.getElementById('upgrade-autoclicker-power')?.addEventListener('click', function() {
                    const cost = 200 * Math.pow(2, gameState.upgrades.autoclickerPower - 1);
                    
                    if (gameState.score >= cost) {
                        gameState.score -= cost;
                        gameState.upgrades.autoclickerPower *= 2;
                        startAutoclicker();
                        
                        if (window.Telegram && Telegram.WebApp) {
                            Telegram.WebApp.HapticFeedback.impactOccurred('medium');
                        }
                        
                        saveGameState();
                        updateUI();
                    }
                });

                document.getElementById('upgrade-click-power')?.addEventListener('click', function() {
                    const cost = 150 * Math.pow(2, Math.log2(gameState.clicksPerTap));
                    
                    if (gameState.score >= cost) {
                        gameState.score -= cost;
                        gameState.clicksPerTap *= 2;
                        
                        if (window.Telegram && Telegram.WebApp) {
                            Telegram.WebApp.HapticFeedback.impactOccurred('medium');
                        }
                        
                        saveGameState();
                        updateUI();
                    }
                });
            }

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –ª–∏–¥–µ—Ä–æ–≤
            function updateLeaderboard() {
                const leaderboardList = document.getElementById('leaderboard-list');
                if (leaderboardList) {
                    if (gameState.leaderboard.length === 0) {
                        leaderboardList.innerHTML = '<div style="text-align: center; padding: 20px;">–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞... ‚è≥</div>';
                    } else {
                        const currentPlayerName = window.Telegram?.WebApp?.initDataUnsafe?.user?.first_name || '–ò–≥—Ä–æ–∫';
                        const currentUserId = getUserId();
                        
                        leaderboardList.innerHTML = gameState.leaderboard
                            .map((player, index) => {
                                const isCurrentPlayer = player.userId === currentUserId || player.name === currentPlayerName;
                                const medal = index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : `${index + 1}.`;
                                const date = player.date ? new Date(player.date).toLocaleDateString('ru-RU') : '';
                                
                                return `
                                    <div class="leaderboard-item" style="
                                        ${isCurrentPlayer ? 'background: linear-gradient(90deg, rgba(255,215,0,0.3) 0%, rgba(255,215,0,0.1) 100%); border-left: 4px solid gold;' : ''}
                                        padding: 10px 12px;
                                        margin: 3px 0;
                                        border-radius: 10px;
                                        border: 1px solid rgba(255,255,255,0.1);
                                    ">
                                        <div style="display: flex; justify-content: space-between; align-items: center;">
                                            <div>
                                                <span style="font-weight: ${isCurrentPlayer ? 'bold' : 'normal'}; font-size: 14px;">
                                                    ${medal} ${player.name} 
                                                    ${isCurrentPlayer ? ' <span style="color: gold;">(–í—ã) üëë</span>' : ''}
                                                </span>
                                                <div style="font-size: 10px; opacity: 0.7; margin-top: 2px;">
                                                    ${date}
                                                </div>
                                            </div>
                                            <span style="font-weight: bold; font-size: 16px; color: #FFE66D;">
                                                ${player.score.toLocaleString()}
                                            </span>
                                        </div>
                                    </div>
                                `;
                            })
                            .join('');
                    }
                }

                const statsElement = document.getElementById('leaderboard-stats');
                if (statsElement) {
                    statsElement.innerHTML = `–í—Å–µ–≥–æ –∏–≥—Ä–æ–∫–æ–≤: ${gameState.totalPlayers || gameState.leaderboard.length} üéÆ`;
                }
            }

            // –°–∏—Å—Ç–µ–º–∞ –≤–∫–ª–∞–¥–æ–∫
            function setupTabs() {
                const tabButtons = document.querySelectorAll('.tab-btn');
                const tabContents = document.querySelectorAll('.tab-content');
                
                tabButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        tabButtons.forEach(btn => btn.classList.remove('active'));
                        tabContents.forEach(content => content.classList.remove('active'));
                        
                        button.classList.add('active');
                        const tabName = button.getAttribute('data-tab');
                        document.getElementById(`${tabName}-tab`).classList.add('active');
                    });
                });
            }

            // –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏–≥—Ä—ã
            function createGameInterface() {
                const app = document.getElementById('app');
                app.innerHTML = `
                    <div class="container">
                        <div class="header">
                            <h1>üéÆ –ü—Ä–æ –ö–ª–∏–∫–µ—Ä</h1>
                            <div class="stats">
                                <div>–û—á–∫–∏: <span id="score">0</span></div>
                                <div>–£—Ä–æ–≤–µ–Ω—å: <span id="level">1</span></div>
                                <div>–ó–∞ –∫–ª–∏–∫: <span id="cpt">1</span></div>
                                <div id="autoclicker-info" class="autoclicker-info">–ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä: +0/—Å–µ–∫</div>
                            </div>
                        </div>

                        <div class="game-area">
                            <button id="click-btn" class="click-button">üéØ –ö–õ–ò–ö!</button>
                        </div>

                        <div class="tab-buttons">
                            <button class="tab-btn active" data-tab="upgrades">–£–ª—É—á—à–µ–Ω–∏—è</button>
                            <button class="tab-btn" data-tab="leaderboard">–õ–∏–¥–µ—Ä—ã</button>
                        </div>

                        <div id="upgrades-tab" class="tab-content active">
                            <div class="upgrades">
                                <h3>‚ö° –£–ª—É—á—à–µ–Ω–∏—è</h3>
                                <button class="upgrade-btn" id="upgrade-click-power">
                                    üí™ –°–∏–ª–∞ –∫–ª–∏–∫–∞ x2<br>
                                    <small>–°—Ç–æ–∏–º–æ—Å—Ç—å: <span class="cost">150</span></small>
                                </button>
                                <button class="upgrade-btn" id="upgrade-multiplier">
                                    üî• –ú–Ω–æ–∂–∏—Ç–µ–ª—å x2<br>
                                    <small>–°—Ç–æ–∏–º–æ—Å—Ç—å: <span class="cost">50</span></small>
                                </button>
                                <button class="upgrade-btn" id="upgrade-autoclicker">
                                    ü§ñ –ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä +1<br>
                                    <small>–°—Ç–æ–∏–º–æ—Å—Ç—å: <span class="cost">100</span></small>
                                </button>
                                <button class="upgrade-btn" id="upgrade-autoclicker-power">
                                    üöÄ –ú–æ—â–Ω–æ—Å—Ç—å –∞–≤—Ç–æ–∫–ª–∏–∫–µ—Ä–∞ x2<br>
                                    <small>–°—Ç–æ–∏–º–æ—Å—Ç—å: <span class="cost">200</span></small>
                                </button>
                            </div>
                        </div>

                        <div id="leaderboard-tab" class="tab-content">
                            <div class="leaderboard">
                                <h3>üèÜ –¢–æ–ø –∏–≥—Ä–æ–∫–æ–≤</h3>
                                <div id="leaderboard-list">
                                    <div style="text-align: center; padding: 20px;">–ó–∞–≥—Ä—É–∑–∫–∞... ‚è≥</div>
                                </div>
                                <div id="leaderboard-stats" class="leaderboard-stats"></div>
                            </div>
                        </div>
                    </div>
                `;
            }

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
            async function startGame() {
                console.log('üéØ –°—Ç–∞—Ä—Ç –∏–≥—Ä—ã');
                loadGameState();
                updateUI();
                
                await loadLeaderboard();
                updateUI();
                
                startAutoclicker();
                setupUpgrades();
                setupTabs();
                
                const clickButton = document.getElementById('click-btn');
                if (clickButton) {
                    clickButton.addEventListener('click', handleClick);
                    clickButton.addEventListener('touchstart', function(e) {
                        e.preventDefault();
                        handleClick(e);
                    });
                }
                
                console.log('‚úÖ –ò–≥—Ä–∞ –∑–∞–ø—É—â–µ–Ω–∞');
                
                setInterval(async () => {
                    await loadLeaderboard();
                    updateUI();
                }, 30000);
            }

            startGame();
        }

        document.addEventListener('DOMContentLoaded', function() {
            console.log('üìÑ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
            initTelegramApp();
        });
    </script>
</body>
</html>